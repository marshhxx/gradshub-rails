<div class="settings-bg">
<div class="settings-wrapper col-md-6 col-md-offset-3">
<p class="settings-header title">Settings</p>

<section class="settings-section">

  <div class="settings-title col-md-4">
    <p class="title">Account</p>
  </div>

  <div class="line-wrapper col-md-12" ng-hide="viewForm == 'fullNameEditing'">
    <div class="col-xs-4">
      <p class="settings-label">Name</p>
    </div>
    <div class="col-xs-6">
      <div class="col-md-12">
        <p class="settings-txt">{{user.name}} {{user.lastname}}</p>
      </div>
    </div>
    <div class="edit-button-wrapper col-xs-2">
      <div class="edit-button-settings" ng-click="toggleSection('fullNameEditing')"></div>
    </div>
  </div>

  <form name="fullNameForm" novalidate>
    <div class="box-edit-wrapper col-md-12" ng-show="viewForm == 'fullNameEditing'">
      <div class="col-md-4">
        <p class="settings-label margin-t10">Name</p>
      </div>
      <div class="inputs-edit-wrapper col-md-8">
        <div class="col-md-12 inputs-top">
          <p class="settings-label secondary">Name</p>
        </div>
        <div class="col-md-8">
          <input name="name" type="text" ng-model="user.name" class="form-control input-sm" required/>
        </div>
        <div ng-if="fullNameForm.name.$invalid && (fullNameForm.$submitted || fullNameForm.name.$touched)"
             ng-messages="fullNameForm.name.$error" class="col-md-10 col-md-offset-2">
          <div class="help-block" ng-message="required">
            Enter your name.
          </div>
        </div>
        <div class="col-md-12 inputs-top">
          <p class="settings-label secondary">Last name</p>
        </div>
        <div class="col-md-8 inputs-bottom">
          <input name="lastName" type="text" ng-model="user.lastname" class="form-control input-sm" required/>
        </div>
        <div ng-if="fullNameForm.lastName.$invalid && (fullNameForm.$submitted || fullNameForm.lastName.$touched)"
             ng-messages="fullNameForm.lastName.$error" class="col-md-10 col-md-offset-2">
          <div class="help-block" ng-message="required">
            Enter your last name.
          </div>
        </div>
        <div class="col-md-12 buttons-wrapper">
          <button class="btn btn-edit btn-active margin-r5" type="submit" ng-click="saveUserFullName(fullNameForm.$valid)">Save
          </button>
          <button ng-click="toggleSection('')" class="btn btn-edit">Close</button>
        </div>
      </div>
    </div>
  </form>

  <div class="col-md-12" ng-hide="viewForm == 'fullNameEditing' || viewForm == 'passwordEditing'">
    <div class="line-separator"></div>
  </div>

  <div class="line-wrapper col-md-12" ng-hide="viewForm == 'passwordEditing'">
    <div class="col-xs-4">
      <p class="settings-label">Password</p>
    </div>
    <div class="input-wrapper col-xs-6">
      <div class="col-md-12">
        <p class="settings-txt">**********</p>
      </div>
    </div>
    <div class="edit-button-wrapper col-xs-2">
      <div class="edit-button-settings" ng-click="toggleSection('passwordEditing')"></div>
    </div>
  </div>

  <form name="passwordForm" ng-submit="savePassword(passwordForm.$valid)" novalidate>
    <div class="box-edit-wrapper col-md-12" ng-show="viewForm == 'passwordEditing'"
         ng-class="{'has-error': passwordForm.password.$invalid && (passwordForm.$submitted || passwordForm.password.$touched)}">
      <div class="col-md-4">
        <p class="settings-label margin-t10">Password</p>
      </div>
      <div class="inputs-edit-wrapper col-md-8">
        <div class="col-md-12 inputs-top">
          <p class="settings-label secondary">Current</p>
        </div>
        <div class="col-md-8">
          <input name="oldPassword" type="password" class="form-control input-sm" ng-model="oldPassword"
                 ng-minlength="5"
                 ng-maxlength="20" required/>
        </div>
        <div
            ng-if="!passwordForm.oldPassword.$pristine && passwordForm.oldPassword.$invalid && (passwordForm.$submitted || passwordForm.oldPassword.$touched)"
            ng-messages="passwordForm.oldPassword.$error" class="col-md-12">
          <div class="help-block" ng-message="required">
            Enter your current password.
          </div>
          <div class="help-block" ng-message="minlength">
            Your current password is too short.
          </div>
          <div class="help-block" ng-message="maxlength">
            Your current password is too long.
          </div>
        </div>
        <div class="col-md-12 inputs-top">
          <p class="settings-label secondary">New</p>
        </div>
        <div class="col-md-8">
          <input name="newPassword" type="password" class="form-control input-sm" ng-model="newPassword"
                 ng-minlength="5"
                 ng-maxlength="20" required/>
        </div>
        <div
            ng-if="!passwordForm.newPassword.$pristine && passwordForm.newPassword.$invalid && (passwordForm.$submitted || passwordForm.newPassword.$touched)"
            ng-messages="passwordForm.newPassword.$error" class="col-md-12">
          <div class="help-block" ng-message="required">
            Enter your new password.
          </div>
          <div class="help-block" ng-message="minlength">
            Your new password is too short.
          </div>
          <div class="help-block" ng-message="maxlength">
            Your new password is too long.
          </div>
        </div>
        <div class="col-md-12 inputs-top">
          <p class="settings-label secondary">Re-type new</p>
        </div>
        <div class="col-md-8 inputs-bottom">
          <input name="reNewPassword" type="password" class="form-control input-sm" ng-model="reNewPassword"
                 ng-minlength="5"
                 ng-maxlength="20" required confirm-password to-confirm="newPassword"/>
        </div>
        <div
            ng-if="!passwordForm.reNewPassword.$pristine && passwordForm.reNewPassword.$invalid && (passwordForm.$submitted || passwordForm.reNewPassword.$touched)"
            ng-messages="passwordForm.reNewPassword.$error" class="col-md-12">
          <div class="help-block" ng-message="required">
            Enter again your new password.
          </div>
          <div class="help-block" ng-message="minlength">
            Your new password is too short.
          </div>
          <div class="help-block" ng-message="maxlength">
            Your new password is too long.
          </div>
          <div class="help-block" ng-message="passwordConfirmed">
            Passwords do not match
          </div>
        </div>
        <div class="col-md-12 buttons-wrapper">
          <button class="btn btn-edit btn-active margin-r5" type="submit">Save</button>
          <button ng-click="toggleSection('')" class="btn btn-edit" type="reset">Close</button>
        </div>
      </div>
    </div>
  </form>

</section>

<section class="settings-section">

  <div class="settings-title col-md-4">
    <p class="title">Personal</p>
  </div>

  <div class="line-wrapper col-md-12" ng-hide="viewForm == 'birthdayEditing'">
    <div class="col-xs-4">
      <p class="settings-label">Birthday</p>
    </div>
    <div class="input-wrapper col-xs-6">
      <div class="col-md-12">
        <p class="settings-txt"> {{ user.birth | date: 'longDate'}} </p>
      </div>
    </div>
    <div class="edit-button-wrapper col-xs-2">
      <div class="edit-button-settings" ng-click="toggleSection('birthdayEditing')"></div>
    </div>
  </div>

  <form name="birthdayForm" novalidate>
    <div class="box-edit-wrapper col-md-12" ng-show="viewForm == 'birthdayEditing'">
      <div class="col-md-4">
        <p class="settings-label margin-t10">Birthday</p>
      </div>
      <div class="inputs-edit-wrapper col-md-8">
        <div class="col-md-12 inputs-top inputs-bottom birthday">
          <simpledatepicker no-day="false" no-month="false" ng-model="birthday"></simpledatepicker>
        </div>
        <div class="col-md-12 buttons-wrapper">
          <button ng-click="saveUserBirth()" class="btn btn-edit btn-active margin-r5">Save</button>
          <button ng-click="toggleSection('')" class="btn btn-edit">Close</button>
        </div>
      </div>
    </div>
  </form>

  <div class="col-md-12" ng-hide="viewForm == 'genderEditing' ||viewForm == 'birthdayEditing'">
    <div class="line-separator"></div>
  </div>

  <div class="line-wrapper col-md-12" ng-hide="viewForm == 'genderEditing'">
    <div class="col-xs-4">
      <p class="settings-label">Gender</p>
    </div>
    <div class="input-wrapper col-xs-6">
      <div class="col-md-12">
        <p class="settings-txt">{{user.gender=='not_known' ? 'Other': user.gender}}</p>
      </div>
    </div>
    <div class="edit-button-wrapper col-xs-2 col-md-2">
      <div class="edit-button-settings" ng-click="toggleSection('genderEditing')"></div>
    </div>
  </div>

  <form name="genderForm" novalidate>
    <div class="box-edit-wrapper col-md-12" ng-show="viewForm == 'genderEditing'">
      <div class="col-md-4">
        <p class="settings-label margin-t10">Gender</p>
      </div>

      <div class="inputs-edit-wrapper col-md-8">
        <div class="col-md-12 inputs-top inputs-bottom">
          <select ng-model="user.gender" ng-change="" class="form-control input-sm">
            <option disabled value="Gender">Gender</option>
            <option value="{{gender}}" ng-repeat="gender in genders"> {{gender}}</option>
          </select>
        </div>
        <div class="col-md-12 buttons-wrapper">
          <button ng-click="saveUserGender()" class="btn btn-edit btn-active margin-r5">Save</button>
          <button ng-click="toggleSection('')" class="btn btn-edit">Close</button>
        </div>
      </div>
    </div>
  </form>

  <div class="col-md-12" ng-hide="viewForm == 'headlineEditing' || viewForm == 'genderEditing'">
    <div class="line-separator"></div>
  </div>

  <div class="line-wrapper col-md-12" ng-hide="viewForm == 'headlineEditing'">
    <div class="col-xs-4">
      <p class="settings-label">Headline</p>
    </div>
    <div class="input-wrapper-headline col-xs-6">
      <div class="col-md-12" ng-if="user.tag != ''">
        {{user.tag}}
      </div>
      <div class="col-md-12 italic" ng-if="user.tag == ''">
        This will be your profile's headline
      </div>
    </div>
    <div class="edit-button-wrapper col-xs-2">
      <div class="edit-button-settings" ng-click="toggleSection('headlineEditing')"></div>
    </div>
  </div>

  <form name="headlineForm" novalidate>
    <div class="box-edit-wrapper col-md-12" ng-show="viewForm == 'headlineEditing'">
      <div class="col-md-4">
        <p class="settings-label margin-t10">Headline</p>
      </div>
      <div class="inputs-edit-wrapper col-md-8">
        <div class="col-md-12 col-lg-8 inputs-top inputs-bottom">
          <input type="text" maxlength="55" ng-model="user.tag" placeholder="This is your profile's headline"
                 class="form-control input-sm"/>
        </div>
        <div class="col-md-12 buttons-wrapper">
          <button ng-click="saveUserTag()" class="btn btn-edit btn-active margin-r5">Save</button>
          <button ng-click="toggleSection('')" class="btn btn-edit">Close</button>
        </div>
      </div>
    </div>
  </form>

  <div class="col-md-12" ng-hide="viewForm == 'locationEditing' || viewForm == 'headlineEditing'">
    <div class="line-separator"></div>
  </div>

  <div class="line-wrapper col-md-12" ng-hide="viewForm == 'locationEditing'">
    <div class="col-xs-4">
      <p class="settings-label">Location</p>
    </div>
    <div class="input-wrapper col-xs-6">
      <div class="col-md-12">
        <p class="settings-txt">{{user.state.name + (user.state.name || user.state.name ? ', ':'') +
          user.country.name}}</p>
      </div>
    </div>
    <div class="edit-button-wrapper col-xs-2">
      <div class="edit-button-settings" ng-click="toggleLocationSection('locationEditing')"></div>
    </div>
  </div>

  <form name="locationForm" novalidate>
    <div class="box-edit-wrapper col-md-12" ng-show="viewForm == 'locationEditing'">
      <div class="col-md-4">
        <p class="settings-label margin-t10">Location</p>
      </div>
      <div class="inputs-edit-wrapper col-md-8">
        <div class="col-md-12 col-lg-8 inputs-top inputs-bottom">
          <country-selector placeholder="What country do you live in?" ng-model="country" on-select="onCountry"
                            required></country-selector>
          <div class="inputs-top">
            <state-selector placeholder="What state do you live in?" ng-model="state" on-select="onState"
                            country-id="user.country_id" required></state-selector>
          </div>
        </div>
        <div class="col-md-12 buttons-wrapper">
          <button ng-click="saveUserLocation()" class="btn btn-edit btn-active margin-r5">Save</button>
          <button ng-click="toggleLocationSection('')" class="btn btn-edit">Close</button>
        </div>
      </div>
    </div>
  </form>

  <div class=" col-md-12" ng-hide="viewForm == 'locationEditing' || viewForm == 'nationalityEditing'">
    <div class="line-separator"></div>
  </div>

  <div class="line-wrapper col-md-12" ng-hide="viewForm == 'nationalityEditing'">
    <div class="col-xs-4">
      <p class="settings-label">Nationality</p>
    </div>
    <div class="input-wrapper col-xs-6">
      <div class="col-md-12">
        <p class="settings-txt"> {{user.nationalities[0].name}} </p>
      </div>
    </div>
    <div class="edit-button-wrapper col-xs-2">
      <div class="edit-button-settings" ng-click="toggleNationalitySection('nationalityEditing')"></div>
    </div>
  </div>
  <div class="box-edit-wrapper col-md-12" ng-show="viewForm == 'nationalityEditing'">
    <div class="col-md-4">
      <p class="settings-label margin-t10">Nationality</p>
    </div>
    <div class="inputs-edit-wrapper col-md-8">
      <div class="col-md-12 col-lg-8 inputs-top inputs-bottom">
        <nationality-selector placeholder="What is your nationality?" ng-model="nationality"
                              on-select="onNationality"></nationality-selector>
      </div>
      <div class="col-md-12 buttons-wrapper">
        <button ng-click="saveUserNationality()" class="btn btn-edit btn-active margin-r5">Save</button>
        <button ng-click="toggleNationalitySection('')" class="btn btn-edit">Close</button>
      </div>
    </div>
  </div>
</section>


</div>
</div>